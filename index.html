<!DOCTYPE html>
<html lang="en-US">

<head>
  <meta charset="utf-8">
  <title>AWS Maps| Neher Data Systems</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />


  <script src="https://cdn.apple-mapkit.com/mk/5.x.x/mapkit.js" crossorigin async data-callback="initMapKit"
    data-libraries="map, full-map"
    data-initial-token="eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6Ik1YTTlQRlRTMkYifQ.eyJpc3MiOiI3UUFNM0xHU1NDIiwiaWF0IjoxNjc3OTIxNTQzLCJleHAiOjE3MDk1MTA0MDB9.Anu5SLkMd9vWuqVjDtWe9ZV8K7LlwBD0fEtD8TetmIdAnRdZaDQt3EQBa3EYqF3lVGvjvRm_GzRNpyZq6X8m9w"></script>



  <style>
    #map {
      width: 100%;
      height: 640px;

    }

    h1 {
      font-family: "Lucida Console", Courier, monospace;
      font-style: oblique;
      text-align: center;
    }

    h2 {
      font-family: "Lucida Console", Courier, monospace;
      font-style: oblique;
      text-align: center;
    }

    p {
      font-family: "Lucida Console", Courier, monospace;
      font-style: normal;
      text-align: start;
    }
  </style>

</head>

<body>
  <h1>AWS Maps</h1>
  <h2>Neher Data Systems</h2>
  <div id="map"></div>

  <script>
    const setupMapKitJs = async () => {
      if (!window.mapkit || window.mapkit.loadedLibraries.length === 0) {
        // mapkit.core.js or the libraries are not loaded yet.
        // Set up the callback and wait for it to be called.
        await new Promise(resolve => { window.initMapKit = resolve });

        // Clean up
        delete window.initMapKit;
      }

      // TODO: For production use, the JWT should not be hard-coded into JS.
      const jwt = "eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6Ik1YTTlQRlRTMkYifQ.eyJpc3MiOiI3UUFNM0xHU1NDIiwiaWF0IjoxNjc3OTIxNTQzLCJleHAiOjE3MDk1MTA0MDB9.Anu5SLkMd9vWuqVjDtWe9ZV8K7LlwBD0fEtD8TetmIdAnRdZaDQt3EQBa3EYqF3lVGvjvRm_GzRNpyZq6X8m9w";
      mapkit.init({
        authorizationCallback: done => { done(jwt); }
      });
    };

    const main = async () => {
      // const jwt = "eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6Ik1YTTlQRlRTMkYifQ.eyJpc3MiOiI3UUFNM0xHU1NDIiwiaWF0IjoxNjc3OTIxNTQzLCJleHAiOjE3MDk1MTA0MDB9.Anu5SLkMd9vWuqVjDtWe9ZV8K7LlwBD0fEtD8TetmIdAnRdZaDQt3EQBa3EYqF3lVGvjvRm_GzRNpyZq6X8m9w";
      await setupMapKitJs();
      var MarkerAnnotation = mapkit.MarkerAnnotation;

      var secretariatcenter = new mapkit.Coordinate(40.3083382, -74.0697479);

      // Setting properties on creation:
      var ndsAnnotation = new MarkerAnnotation(secretariatcenter, { color: "pink", title: "Neher Data Systems", glyphText: "üè¢" });


      const secretariat = new mapkit.CoordinateRegion(
        new mapkit.Coordinate(40.3083382, -74.0697479),
        new mapkit.CoordinateSpan(0.167647972, 0.354985255)
      );

      var map = new mapkit.Map("map", { colorScheme: mapkit.Map.ColorSchemes.Dark, showsMapTypeControl: false, showsUserLocationControl: true, center: secretariatcenter });

      // map.region = secretariat;
      // Add and show both annotations on the map
      map.showItems([ndsAnnotation]);
    };

    main();

  </script>
</body>

<footer>
  <p>¬© 2023 Neher Data Systems</p>
</footer>

</html>
